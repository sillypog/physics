<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>VectorTests</title>
<script type="text/javascript" src="geom.js"></script>
<script type="text/javascript">
function runTests(){
	/**
	* Addition
	*/
	var p1 = new Vector(5,2);
	var p2 = new Vector(3,4);
	
	var p3 = Vector.applyCalculation(p1, p2, 'add');
	assert(p3,8,6,'static add');
	
	p1.add(p2);
	assert(p1,8,6,'add');
	
	
	/**
	* Subtraction
	*/
	p1 = new Vector(2,3);
	p2 = new Vector(4,1);
	
	p3 = Vector.applyCalculation(p1, p2, 'sub');
	assert(p3,-2,2,'static sub');
	
	// Also confirm that p3 + p2 = p1
	p4 = Vector.applyCalculation(p3, p2, 'add');
	assert(p4,p1.x,p1.y,'add from subtract');
	
	p1.sub(p2);
	assert(p1,-2,2,'sub');
	

	/**
	* Multiplication
	*/
	p1 = new Vector(-3,7);
	p1.scale(3);
	assert(p1,-9,21,'multiplication');
	
	/**
	* Division
	*/
	p1 = new Vector(8,-4);
	p1.scale(0.5);
	assert(p1,4,-2,'division');
	
	/**
	* Magnitude
	*/
	p1 = new Vector(3,-4);	// Whether these are + or -, they get squared away
	var mag = p1.mag();
	if (mag != 5){
	 console.log('magnitude failed',mag);
	}
	
	/**
	* Normalise
	*/
	p1.normalise();
	assert(p1, 3*(1/5), -4*(1/5), 'normalise');
	
	console.log('Tests complete');
}

function assert(v, x, y, testName){
	if (v.x != x || v.y != y){
		console.log(testName,'failed.',v);
	}
}
	
</script>

</head>

<body onload="runTests();">

<div id="stage" />

</body>
</html>
